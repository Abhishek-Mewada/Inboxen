{% extends 'base.html' %}
{% load i18n two_factor %}
{% block content %}

{% if wizard.form.errors %}
    {% if wizard.steps.current == 'token' %}
        <p class="alert alert-danger">{% trans "Sorry, that token wasn't valid." %}</p>
    {% else %}
        <p class="alert alert-danger">{% trans "Your username and password didn't match. Please try again." %}</p>
    {% endif %}
{% endif %}

<div class="row">
    <div class="panel panel-default col-xs-12 col-sm-6 col-sm-offset-3 col-md-4 col-md-offset-4 col-lg-4 col-lg-offset-4">
    <div class="panel-body">
    {% if wizard.steps.current == 'token' %}
        <p>{% blocktrans %}Please enter the tokens generated by your token generator.{% endblocktrans %}</p>
    {% endif %}

        <form class="form" action="" method="post">
        {% csrf_token %}
        {{ wizard.management_form }}
        <div class="form-group">
        {% for field in wizard.form %}
            {{ field.label_tag }}{{ field }}
        {% endfor %}
        </div>

        <button type="submit" class="btn btn-primary">{% trans "Login" %}</button>
        <a href="{% url 'index' %}" class="btn btn-default">{% trans "Cancel" %}</a>

            {% if backup_tokens %}
                <hr>
                <p>{% trans "As a last resort, you can use a backup token:" %}</p>
                <p>
                    <button name="wizard_goto_step" type="submit" value="backup"
                class="btn btn-default">{% trans "Use Backup Token" %}</button>
                </p>
            {% endif %}

        </form>
    </div>
    </div>
</div>
{% endblock %}
