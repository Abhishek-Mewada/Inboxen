{# Copyright (c) 2015 Jessica Tallon & Matt Molyneaux. This file is part of Inboxen. Licensed under the terms of the GNU AGPL, as published by the FSF, version 3 the or later #}
{% extends 'inboxen/base.html' %}
{% load i18n humanize bootstrap %}

{% block headline %}{% trans "Tickets" %}{% endblock %}

{% block breadcumbs %}
    <ul class="breadcrumb">
        <li><a href="{% url 'termsofservice-index' %}">{% trans "Help" %}</a></li>
        <li><a href="{% url 'tickets-index' %}">{% trans "Questions" %}</a></li>
        <li class="active">{% blocktrans %}Status: {{ status }}{% endblocktrans %}</li>
    </ul>
{% endblock %}

{% block content %}
<div class="table-responsive">
    <table class="table table-hover table-honeydew">
        <thead>
            <tr>
                <th>{% trans "Subject" %}</th>
                <th>{% trans "Responses" %}</th>
                <th>{% trans "Status" %}</th>
                <th>{% trans "Last Activity" %}</th>
            </tr>
        </thead>
        <tbody>
        {% for question in object_list %}
            <tr>
                <td><a href="{% url 'tickets-detail' pk=question.pk %}">{{ question.subject }}</a></td>
                <td>{{ question.response_count }}</td>
                <td>{{ question.get_status_display }}</td>
                <td title="{{ question.last_activity|date:"r" }}">{{ question.last_activity|naturaltime }}</td>
            </tr>
        {% empty %}
            <tr>
                <td colspan=4>{% trans "There are no questions." %}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
<ul class="pager">
    {% if page_obj.has_previous %}
        <li class="previous"><a href="{% url 'tickets-list' status=status page=page_obj.previous_page_number %}">
            <span aria-hidden="true">&laquo;</span><span class="sr-only">{% trans "Previous" %}</span>
        </a></li>
    {% endif %}

    {% if page_obj.has_next %}
        <li class="next"><a href="{% url 'tickets-list' status=status page=page_obj.next_page_number %}">
            <span aria-hidden="true">&raquo;</span><span class="sr-only">{% trans "Next" %}</span>
        </a></li>
    {% endif %}
</ul>
{% endblock %}
