{# Copyright (c) 2015 Jessica Tallon & Matt Molyneaux. This file is part of Inboxen. Licensed under the terms of the GNU AGPL, as published by the FSF, version 3 the or later #}
{% extends 'inboxen/base.html' %}
{% load i18n bootstrap %}

{% block breadcumbs %}
    <ul class="breadcrumb">
        <li><a href="{% url 'termsofservice-index' %}">{% trans "Help" %}</a></li>
        <li><a href="{% url 'tickets-index' %}">{% trans "Questions" %}</a></li>
        <li class="active">{{ object.subject }}</li>
    </ul>
{% endblock %}

{% block content %}
<p>
        <b>{% trans "Asked by" %}:</b> {{ object.author.username }}
    <br />
        <b>{% trans "Asked" %}:</b> {{ object.date|timesince }} {% trans "ago" %}
    <br />
        <b>{% trans "Last activity" %}:</b> {{ object.last_activity|timesince }} {% trans "ago" %}
    <br />
        <b>{% trans "Status" %}:</b> {{ object.get_status_display }}
</p>
<p>{{ object.render_body }}</p>

<small><a href="#lastreply">{% trans "Latest reply" %} &raquo;</a><br />
<a href="#response-form">{% trans "Reply form" %} &raquo;</a></small>

<hr>
{% for response in responses %}
    <p {% if forloop.last %}id="lastreply"{% endif %}>{{ response.author.username }} {% trans "says" %}:</p>
    <p>{{ response.render_body }}</p>
    <hr>
{% endfor %}

<div class="panel panel-default col-xs-12 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-4 col-lg-offset-4">
    <div class="panel-body">
        <form id="response-form" class="form" method="post" action="{% url 'tickets-detail' pk=object.pk %}">
            {% csrf_token %}
            {{ form|bootstrap }}
            <button class="btn btn-primary">{% trans "Submit" %}</button>
        </form>
    </div>
</div>
{% endblock %}
